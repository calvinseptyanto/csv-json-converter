<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>CSV to JSON Converter</title>
    <script src="elm.js"></script>
    <!-- Will be created by compiling Elm -->
  </head>
  <body>
    <input type="file" id="fileInput" />
    <div id="elm"></div>
    <script>
      var app = Elm.Main.init({
        node: document.getElementById("elm"),
      });

      // Get the file input element
      var fileInput = document.getElementById("fileInput");

      fileInput.addEventListener("change", function () {
        var file = fileInput.files[0];
        var reader = new FileReader();

        reader.onload = function (e) {
          var csvContent = e.target.result;
          // Once the file is read, send the content to Elm
          app.ports.checkFile.send(csvContent);
        };

        reader.readAsText(file);
      });

      app.ports.convertComplete.subscribe(function (json) {
        // Handle JSON data here (e.g., display it or allow the user to save it)
        console.log("Received JSON from Elm: ", json);
      });
    </script>
  </body>
</html>
